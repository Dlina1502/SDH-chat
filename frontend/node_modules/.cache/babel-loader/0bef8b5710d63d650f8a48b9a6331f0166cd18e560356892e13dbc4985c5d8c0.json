{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { findUserRequest } from '../services/services';\nconst useFetchRecipients = ({\n  chats,\n  userId\n}) => {\n  _s();\n  const [recipientUsers, setRecipientUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const fetchRecipients = async () => {\n      try {\n        setLoading(true);\n        const recipientIds = new Set();\n        let chatsList = chats.data;\n        chatsList.forEach(chat => {\n          chat.participants.forEach(id => {\n            if (id !== userId) recipientIds.add(id);\n          });\n        });\n        const userRequests = Array.from(recipientIds).map(id => findUserRequest(id)).data;\n        console.log(userRequests);\n        const users = await Promise.all(userRequests);\n        console.log(users);\n        setRecipientUsers(users);\n      } catch (err) {\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchRecipients();\n  }, [chats, userId]);\n  return {\n    recipientUsers,\n    loading,\n    error\n  };\n};\n_s(useFetchRecipients, \"zgQD5/td9bxAU6V0qTchBecsys4=\");\nexport default useFetchRecipients;","map":{"version":3,"names":["useState","useEffect","findUserRequest","useFetchRecipients","chats","userId","_s","recipientUsers","setRecipientUsers","loading","setLoading","error","setError","fetchRecipients","recipientIds","Set","chatsList","data","forEach","chat","participants","id","add","userRequests","Array","from","map","console","log","users","Promise","all","err","message"],"sources":["C:/Users/marce/Desktop/Personal projects/SDH-chat/frontend/src/hooks/useFetchRecipients.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { findUserRequest } from '../services/services';\r\n\r\nconst useFetchRecipients = ({ chats, userId }) => {\r\n  const [recipientUsers, setRecipientUsers] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchRecipients = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const recipientIds = new Set();\r\n        let chatsList = chats.data;\r\n        chatsList.forEach(chat => {\r\n          chat.participants.forEach(id => {\r\n            if (id !== userId) recipientIds.add(id);\r\n          });\r\n        });\r\n\r\n        const userRequests = Array.from(recipientIds).map(id => findUserRequest(id)).data;\r\n        console.log(userRequests)\r\n        const users = await Promise.all(userRequests);\r\n        console.log(users)\r\n        setRecipientUsers(users);\r\n      } catch (err) {\r\n        setError(err.message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchRecipients();\r\n    \r\n  }, [chats, userId]);\r\n\r\n  return { recipientUsers, loading, error };\r\n};\r\n\r\nexport default useFetchRecipients;"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,eAAe,QAAQ,sBAAsB;AAEtD,MAAMC,kBAAkB,GAAGA,CAAC;EAAEC,KAAK;EAAEC;AAAO,CAAC,KAAK;EAAAC,EAAA;EAChD,MAAM,CAACC,cAAc,EAAEC,iBAAiB,CAAC,GAAGR,QAAQ,CAAC,EAAE,CAAC;EACxD,MAAM,CAACS,OAAO,EAAEC,UAAU,CAAC,GAAGV,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACW,KAAK,EAAEC,QAAQ,CAAC,GAAGZ,QAAQ,CAAC,IAAI,CAAC;EAExCC,SAAS,CAAC,MAAM;IACd,MAAMY,eAAe,GAAG,MAAAA,CAAA,KAAY;MAClC,IAAI;QACFH,UAAU,CAAC,IAAI,CAAC;QAChB,MAAMI,YAAY,GAAG,IAAIC,GAAG,CAAC,CAAC;QAC9B,IAAIC,SAAS,GAAGZ,KAAK,CAACa,IAAI;QAC1BD,SAAS,CAACE,OAAO,CAACC,IAAI,IAAI;UACxBA,IAAI,CAACC,YAAY,CAACF,OAAO,CAACG,EAAE,IAAI;YAC9B,IAAIA,EAAE,KAAKhB,MAAM,EAAES,YAAY,CAACQ,GAAG,CAACD,EAAE,CAAC;UACzC,CAAC,CAAC;QACJ,CAAC,CAAC;QAEF,MAAME,YAAY,GAAGC,KAAK,CAACC,IAAI,CAACX,YAAY,CAAC,CAACY,GAAG,CAACL,EAAE,IAAInB,eAAe,CAACmB,EAAE,CAAC,CAAC,CAACJ,IAAI;QACjFU,OAAO,CAACC,GAAG,CAACL,YAAY,CAAC;QACzB,MAAMM,KAAK,GAAG,MAAMC,OAAO,CAACC,GAAG,CAACR,YAAY,CAAC;QAC7CI,OAAO,CAACC,GAAG,CAACC,KAAK,CAAC;QAClBrB,iBAAiB,CAACqB,KAAK,CAAC;MAC1B,CAAC,CAAC,OAAOG,GAAG,EAAE;QACZpB,QAAQ,CAACoB,GAAG,CAACC,OAAO,CAAC;MACvB,CAAC,SAAS;QACRvB,UAAU,CAAC,KAAK,CAAC;MACnB;IACF,CAAC;IAEDG,eAAe,CAAC,CAAC;EAEnB,CAAC,EAAE,CAACT,KAAK,EAAEC,MAAM,CAAC,CAAC;EAEnB,OAAO;IAAEE,cAAc;IAAEE,OAAO;IAAEE;EAAM,CAAC;AAC3C,CAAC;AAACL,EAAA,CAlCIH,kBAAkB;AAoCxB,eAAeA,kBAAkB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}