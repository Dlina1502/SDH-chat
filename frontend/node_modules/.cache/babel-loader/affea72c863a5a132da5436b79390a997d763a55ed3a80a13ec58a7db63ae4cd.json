{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { findUserRequest } from '../services/services';\nconst useFetchRecipients = ({\n  chats,\n  userId\n}) => {\n  _s();\n  const [recipientUsers, setRecipientUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const fetchRecipients = async () => {\n      try {\n        setLoading(true);\n        const recipientIds = new Set();\n        console.log(chats);\n        if (Array.isArray(chats)) {\n          console.log(\"chats is an array\");\n          chats.forEach(chat => {\n            chat.participants.forEach(id => {\n              if (id !== userId) recipientIds.add(id);\n            });\n          });\n        }\n        const userRequests = Array.from(recipientIds).map(id => findUserRequest(id));\n        const users = await Promise.all(userRequests);\n        setRecipientUsers(users);\n      } catch (err) {\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchRecipients();\n    console.log(chats);\n  }, [chats, userId]);\n  return {\n    recipientUsers,\n    loading,\n    error\n  };\n};\n_s(useFetchRecipients, \"zgQD5/td9bxAU6V0qTchBecsys4=\");\nexport default useFetchRecipients;","map":{"version":3,"names":["useState","useEffect","findUserRequest","useFetchRecipients","chats","userId","_s","recipientUsers","setRecipientUsers","loading","setLoading","error","setError","fetchRecipients","recipientIds","Set","console","log","Array","isArray","forEach","chat","participants","id","add","userRequests","from","map","users","Promise","all","err","message"],"sources":["C:/Users/marce/Desktop/Personal projects/SDH-chat/frontend/src/hooks/useFetchRecipients.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { findUserRequest } from '../services/services';\r\n\r\nconst useFetchRecipients = ({ chats, userId }) => {\r\n    const [recipientUsers, setRecipientUsers] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const fetchRecipients = async () => {\r\n            try {\r\n                setLoading(true);\r\n                const recipientIds = new Set();\r\n                console.log(chats)\r\n                if (Array.isArray(chats)) {\r\n                    console.log(\"chats is an array\")\r\n                    chats.forEach(chat => {\r\n                        chat.participants.forEach(id => {\r\n                            if (id !== userId) recipientIds.add(id);\r\n                        });\r\n                    });\r\n                }\r\n\r\n                const userRequests = Array.from(recipientIds).map(id => findUserRequest(id));\r\n                const users = await Promise.all(userRequests);\r\n                setRecipientUsers(users);\r\n            } catch (err) {\r\n                setError(err.message);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchRecipients();\r\n        console.log(chats)\r\n    }, [chats, userId]);\r\n\r\n    return { recipientUsers, loading, error };\r\n};\r\n\r\nexport default useFetchRecipients;"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,eAAe,QAAQ,sBAAsB;AAEtD,MAAMC,kBAAkB,GAAGA,CAAC;EAAEC,KAAK;EAAEC;AAAO,CAAC,KAAK;EAAAC,EAAA;EAC9C,MAAM,CAACC,cAAc,EAAEC,iBAAiB,CAAC,GAAGR,QAAQ,CAAC,EAAE,CAAC;EACxD,MAAM,CAACS,OAAO,EAAEC,UAAU,CAAC,GAAGV,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACW,KAAK,EAAEC,QAAQ,CAAC,GAAGZ,QAAQ,CAAC,IAAI,CAAC;EAExCC,SAAS,CAAC,MAAM;IACZ,MAAMY,eAAe,GAAG,MAAAA,CAAA,KAAY;MAChC,IAAI;QACAH,UAAU,CAAC,IAAI,CAAC;QAChB,MAAMI,YAAY,GAAG,IAAIC,GAAG,CAAC,CAAC;QAC9BC,OAAO,CAACC,GAAG,CAACb,KAAK,CAAC;QAClB,IAAIc,KAAK,CAACC,OAAO,CAACf,KAAK,CAAC,EAAE;UACtBY,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAC;UAChCb,KAAK,CAACgB,OAAO,CAACC,IAAI,IAAI;YAClBA,IAAI,CAACC,YAAY,CAACF,OAAO,CAACG,EAAE,IAAI;cAC5B,IAAIA,EAAE,KAAKlB,MAAM,EAAES,YAAY,CAACU,GAAG,CAACD,EAAE,CAAC;YAC3C,CAAC,CAAC;UACN,CAAC,CAAC;QACN;QAEA,MAAME,YAAY,GAAGP,KAAK,CAACQ,IAAI,CAACZ,YAAY,CAAC,CAACa,GAAG,CAACJ,EAAE,IAAIrB,eAAe,CAACqB,EAAE,CAAC,CAAC;QAC5E,MAAMK,KAAK,GAAG,MAAMC,OAAO,CAACC,GAAG,CAACL,YAAY,CAAC;QAC7CjB,iBAAiB,CAACoB,KAAK,CAAC;MAC5B,CAAC,CAAC,OAAOG,GAAG,EAAE;QACVnB,QAAQ,CAACmB,GAAG,CAACC,OAAO,CAAC;MACzB,CAAC,SAAS;QACNtB,UAAU,CAAC,KAAK,CAAC;MACrB;IACJ,CAAC;IAEDG,eAAe,CAAC,CAAC;IACjBG,OAAO,CAACC,GAAG,CAACb,KAAK,CAAC;EACtB,CAAC,EAAE,CAACA,KAAK,EAAEC,MAAM,CAAC,CAAC;EAEnB,OAAO;IAAEE,cAAc;IAAEE,OAAO;IAAEE;EAAM,CAAC;AAC7C,CAAC;AAACL,EAAA,CAnCIH,kBAAkB;AAqCxB,eAAeA,kBAAkB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}